
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Configuration &#8212; Embulk 0.8 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release Notes" href="release.html" />
    <link rel="prev" title="Scheduled bulk data loading to Elasticsearch + Kibana 5 from CSV files" href="recipe/scheduled-csv-load-to-elasticsearch-kibana5.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Embulk 0.8 documentation</span></a></h1>
        <h2 class="heading"><span>Configuration</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="recipe/scheduled-csv-load-to-elasticsearch-kibana5.html">Scheduled bulk data loading to Elasticsearch + Kibana 5 from CSV files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="release.html">Release Notes</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#embulk-configuration-file-format" id="id38">Embulk configuration file format</a><ul>
<li><a class="reference internal" href="#using-variables" id="id39">Using variables</a></li>
<li><a class="reference internal" href="#including-files" id="id40">Including files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-file-input-plugin" id="id41">Local file input plugin</a><ul>
<li><a class="reference internal" href="#options" id="id42">Options</a></li>
<li><a class="reference internal" href="#example" id="id43">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#csv-parser-plugin" id="id44">CSV parser plugin</a><ul>
<li><a class="reference internal" href="#id2" id="id45">Options</a></li>
<li><a class="reference internal" href="#id4" id="id46">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-parser-plugin" id="id47">JSON parser plugin</a><ul>
<li><a class="reference internal" href="#id5" id="id48">Options</a></li>
<li><a class="reference internal" href="#id8" id="id49">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gzip-decoder-plugin" id="id50">Gzip decoder plugin</a><ul>
<li><a class="reference internal" href="#id9" id="id51">Options</a></li>
<li><a class="reference internal" href="#id10" id="id52">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bzip2-decoder-plugin" id="id53">BZip2 decoder plugin</a><ul>
<li><a class="reference internal" href="#id11" id="id54">Options</a></li>
<li><a class="reference internal" href="#id12" id="id55">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-output-plugin" id="id56">File output plugin</a><ul>
<li><a class="reference internal" href="#id13" id="id57">Options</a></li>
<li><a class="reference internal" href="#id14" id="id58">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#csv-formatter-plugin" id="id59">CSV formatter plugin</a><ul>
<li><a class="reference internal" href="#id15" id="id60">Options</a></li>
<li><a class="reference internal" href="#id17" id="id61">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gzip-encoder-plugin" id="id62">Gzip encoder plugin</a><ul>
<li><a class="reference internal" href="#id18" id="id63">Options</a></li>
<li><a class="reference internal" href="#id19" id="id64">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bzip2-encoder-plugin" id="id65">BZip2 encoder plugin</a><ul>
<li><a class="reference internal" href="#id20" id="id66">Options</a></li>
<li><a class="reference internal" href="#id21" id="id67">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rename-filter-plugin" id="id68">Rename filter plugin</a><ul>
<li><a class="reference internal" href="#id22" id="id69">Options</a></li>
<li><a class="reference internal" href="#renaming-rules" id="id70">Renaming rules</a></li>
<li><a class="reference internal" href="#example-of-renaming-rules" id="id71">Example of renaming rules</a></li>
<li><a class="reference internal" href="#columns-not-recommended" id="id72">Columns: not recommended</a></li>
</ul>
</li>
<li><a class="reference internal" href="#remove-columns-filter-plugin" id="id73">Remove columns filter plugin</a><ul>
<li><a class="reference internal" href="#id30" id="id74">Options</a></li>
<li><a class="reference internal" href="#id31" id="id75">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-executor-plugin" id="id76">Local executor plugin</a><ul>
<li><a class="reference internal" href="#id32" id="id77">Options</a></li>
<li><a class="reference internal" href="#id33" id="id78">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#guess-executor" id="id79">Guess executor</a><ul>
<li><a class="reference internal" href="#id34" id="id80">Options</a></li>
<li><a class="reference internal" href="#id35" id="id81">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preview-executor" id="id82">Preview executor</a><ul>
<li><a class="reference internal" href="#id36" id="id83">Options</a></li>
<li><a class="reference internal" href="#id37" id="id84">Example</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="embulk-configuration-file-format">
<h2><a class="toc-backref" href="#id38">Embulk configuration file format</a><a class="headerlink" href="#embulk-configuration-file-format" title="Permalink to this headline">¶</a></h2>
<p>Embulk uses a YAML file to define a bulk data loading. Here is an example of the file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">./mydata/csv/</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&#39;,&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&#39;NULL&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">skip_header_lines</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">id</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">account</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">time</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">purchase</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y%m%d&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">comment</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">string</span><span class="p p-Indicator">}</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">speedometer</span>
    <span class="l l-Scalar l-Scalar-Plain">speed_limit</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">250000</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stdout</span>
</pre></div>
</div>
<p>A configuration file consists of following sections:</p>
<ul class="simple">
<li><strong>in:</strong> Input plugin options. An input plugin is either record-based (<a class="reference external" href="https://github.com/embulk/embulk-input-jdbc">MySQL</a>, <a class="reference external" href="https://github.com/lulichn/embulk-input-dynamodb">DynamoDB</a>, etc) or file-based (<a class="reference external" href="https://github.com/embulk/embulk-input-s3">S3</a>, <a class="reference external" href="https://github.com/takumakanari/embulk-input-http">HTTP</a>, etc).<ul>
<li><strong>parser:</strong> If the input is file-based, parser plugin parses a file format (built-in csv, <a class="reference external" href="https://github.com/takumakanari/embulk-parser-json">json</a>, etc).</li>
<li><strong>decoder:</strong> If the input is file-based, decoder plugin decodes compression or encryption (built-in gzip, bzip2, <a class="reference external" href="https://github.com/hata/embulk-decoder-commons-compress">zip</a>, <a class="reference external" href="https://github.com/hata/embulk-decoder-commons-compress">tar.gz</a>, etc).</li>
</ul>
</li>
<li><strong>out:</strong> Output plugin options. An output plugin is either record-based (<a class="reference external" href="https://github.com/embulk/embulk-output-jdbc">Oracle</a>, <a class="reference external" href="https://github.com/muga/embulk-output-elasticsearch">Elasticsearch</a>, etc) or file-based (<a class="reference external" href="https://github.com/hakobera/embulk-output-gcs">Google Cloud Storage</a>, <a class="reference external" href="https://github.com/embulk/embulk-output-command">Command</a>, etc)<ul>
<li><strong>formatter:</strong> If the output is file-based, formatter plugin formats a file format (such as built-in csv, <a class="reference external" href="https://github.com/takei-yuya/embulk-formatter-jsonl">jsonl</a>)</li>
<li><strong>encoder:</strong> If the output is file-based, encoder plugin encodes compression or encryption (such as built-in gzip or bzip2)</li>
</ul>
</li>
<li><strong>filters:</strong> Filter plugins options (optional).</li>
<li><strong>exec:</strong> Executor plugin options. An executor plugin control parallel processing (such as built-in thread executor, <a class="reference external" href="https://github.com/embulk/embulk-executor-mapreduce">Hadoop MapReduce executor</a>)</li>
</ul>
<p>In many cases, what you need to write is <strong>in:</strong>, <strong>out</strong>: and <strong>formatter</strong> sections only because <code class="docutils literal notranslate"><span class="pre">guess</span></code> command guesses <strong>parser</strong> and <strong>decoder</strong> options for you. See also the <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
<div class="section" id="using-variables">
<h3><a class="toc-backref" href="#id39">Using variables</a><a class="headerlink" href="#using-variables" title="Permalink to this headline">¶</a></h3>
<p>You can embed environment variables in configuration file using <a class="reference external" href="http://liquidmarkup.org/">Liquid template engine</a> (This is experimental feature. Behavior might change or be removed in future releases).</p>
<p>To use template engine, configuration file name must end with <code class="docutils literal notranslate"><span class="pre">.yml.liquid</span></code>.</p>
<p>Environment variables are set to <code class="docutils literal notranslate"><span class="pre">env</span></code> variable.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.path_prefix</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">postgresql</span>
  <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_host</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_port</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">user</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_user</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">env.pg_password</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">database</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">embulk_load</span>
  <span class="l l-Scalar l-Scalar-Plain">mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">insert</span>
  <span class="l l-Scalar l-Scalar-Plain">table</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_table</span> <span class="p p-Indicator">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="including-files">
<h3><a class="toc-backref" href="#id40">Including files</a><a class="headerlink" href="#including-files" title="Permalink to this headline">¶</a></h3>
<p>Configuration file can include another configuration file. To use it, configuration file name must end with <code class="docutils literal notranslate"><span class="pre">.yml.liquid</span></code>.</p>
<p>File will be searched from the relative path of the input configuration file. And file name will be <code class="docutils literal notranslate"><span class="pre">_&lt;name&gt;.yml.liquid</span></code>. For example, if you add <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">'subdir/inc'</span> <span class="pre">%}</span></code> tag to <code class="docutils literal notranslate"><span class="pre">myconfig/config.yml.liquid</span></code> file, it includes <code class="docutils literal notranslate"><span class="pre">myconfig/subdir/_inc.yml.liquid</span></code> file.</p>
<div class="highlight-liquid notranslate"><div class="highlight"><pre><span></span># config.yml.liquid
<span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span><span class="s1">&#39;in_mysql&#39;</span><span class="w"> </span><span class="p">%}</span>
out:
  type: stdout
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># _in_mysql.yml.liquid</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql</span>
</pre></div>
</div>
<p>With above 2 files, actual configuration file will be:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># $ embulk run config.yml.liquid</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stdout</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="local-file-input-plugin">
<h2><a class="toc-backref" href="#id41">Local file input plugin</a><a class="headerlink" href="#local-file-input-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">file</span></code> input plugin reads files from local file system.</p>
<div class="section" id="options">
<h3><a class="toc-backref" href="#id42">Options</a><a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="10%" />
<col width="48%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>path_prefix</td>
<td>string</td>
<td>Path prefix of input files</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>parser</td>
<td>hash</td>
<td>Parser configuration (see below)</td>
<td>required</td>
</tr>
<tr class="row-even"><td>decoders</td>
<td>array</td>
<td>Decoder configuration (see below)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>last_path</td>
<td>string</td>
<td>Name of last read file in previous operation</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>follow_symlinks</td>
<td>boolean</td>
<td>If <cite>true</cite>, follow symbolic link directories</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">path_prefix</span></code> option is required. If you have files as following, you may set <code class="docutils literal notranslate"><span class="pre">path_prefix:</span> <span class="pre">/path/to/files/sample_</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- files
            |-- sample_01.csv   -&gt; read
            |-- sample_02.csv   -&gt; read
            |-- sample_03.csv   -&gt; read
            |-- sample_04.csv   -&gt; read
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">last_path</span></code> option is used to skip files older than or same with the file in dictionary order.
For example, if you set <code class="docutils literal notranslate"><span class="pre">last_path:</span> <span class="pre">/path/to/files/sample_02.csv</span></code>, Embulk reads following files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- files
            |-- sample_01.csv   -&gt; skip
            |-- sample_02.csv   -&gt; skip
            |-- sample_03.csv   -&gt; read
            |-- sample_04.csv   -&gt; read
</pre></div>
</div>
</div>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id43">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/files/sample_</span>
  <span class="l l-Scalar l-Scalar-Plain">last_path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/files/sample_02.csv</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>In most of cases, you’ll use guess to configure the parser and decoders. See also <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
</div>
</div>
<div class="section" id="csv-parser-plugin">
<h2><a class="toc-backref" href="#id44">CSV parser plugin</a><a class="headerlink" href="#csv-parser-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">csv</span></code> parser plugin parses CSV and TSV files.</p>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id45">Options</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="5%" />
<col width="58%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>delimiter</td>
<td>string</td>
<td>Delimiter character such as <code class="docutils literal notranslate"><span class="pre">,</span></code> for CSV, <code class="docutils literal notranslate"><span class="pre">&quot;\t&quot;</span></code> for TSV, <code class="docutils literal notranslate"><span class="pre">&quot;|&quot;</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">,</span></code> by default</td>
</tr>
<tr class="row-odd"><td>quote</td>
<td>string</td>
<td>The character surrounding a quoted value. Setting <code class="docutils literal notranslate"><span class="pre">null</span></code> disables quoting.</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;</span></code> by default</td>
</tr>
<tr class="row-even"><td>escape</td>
<td>string</td>
<td>Escape character to escape a special character. Setting <code class="docutils literal notranslate"><span class="pre">null</span></code> disables escaping.</td>
<td><code class="docutils literal notranslate"><span class="pre">\\</span></code> by default</td>
</tr>
<tr class="row-odd"><td>skip_header_lines</td>
<td>integer</td>
<td>Skip this number of lines first. Set 1 if the file has header line.</td>
<td><code class="docutils literal notranslate"><span class="pre">0</span></code> by default</td>
</tr>
<tr class="row-even"><td>null_string</td>
<td>string</td>
<td>If a value is this string, converts it to NULL. For example, set <code class="docutils literal notranslate"><span class="pre">\N</span></code> for CSV files created by mysqldump</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>trim_if_not_quoted</td>
<td>boolean</td>
<td>If true, remove spaces of a value if the value is not surrounded by the quote character</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-even"><td>quotes_in_quoted_fields</td>
<td>enum</td>
<td>Specify how to deal with irregular unescaped quote characters in quoted fields</td>
<td><code class="docutils literal notranslate"><span class="pre">ACCEPT_ONLY_RFC4180_ESCAPED</span></code> by default</td>
</tr>
<tr class="row-odd"><td>comment_line_marker</td>
<td>string</td>
<td>Skip a line if the line begins with this string</td>
<td>null by default</td>
</tr>
<tr class="row-even"><td>allow_optional_columns</td>
<td>boolean</td>
<td>If true, set null to insufficient columns. Otherwise, skip the row in case of insufficient number of columns</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-odd"><td>allow_extra_columns</td>
<td>boolean</td>
<td>If true, ignore too many columns. Otherwise, skip the row in case of too many columns</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-even"><td>max_quoted_size_limit</td>
<td>integer</td>
<td>Maximum number of bytes of a quoted value. If a value exceeds the limit, the row will be skipped</td>
<td><code class="docutils literal notranslate"><span class="pre">131072</span></code> by default</td>
</tr>
<tr class="row-odd"><td>stop_on_invalid_record</td>
<td>boolean</td>
<td>Stop bulk load transaction if a file includes invalid record (such as invalid timestamp)</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-even"><td>default_timezone</td>
<td>string</td>
<td>Time zone of timestamp columns if the value itself doesn’t include time zone description (eg. Asia/Tokyo)</td>
<td><code class="docutils literal notranslate"><span class="pre">UTC</span></code> by default</td>
</tr>
<tr class="row-odd"><td>default_date</td>
<td>string</td>
<td>Set date part if the format doesn’t include date part.</td>
<td><code class="docutils literal notranslate"><span class="pre">1970-01-01</span></code> by default</td>
</tr>
<tr class="row-even"><td>newline</td>
<td>enum</td>
<td>Newline character (CRLF, LF or CR)</td>
<td><code class="docutils literal notranslate"><span class="pre">CRLF</span></code> by default</td>
</tr>
<tr class="row-odd"><td>charset</td>
<td>enum</td>
<td>Character encoding (eg. ISO-8859-1, UTF-8)</td>
<td><code class="docutils literal notranslate"><span class="pre">UTF-8</span></code> by default</td>
</tr>
<tr class="row-even"><td>columns</td>
<td>hash</td>
<td>Columns (see below)</td>
<td>required</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">quotes_in_quoted_fields</span></code> option specifies how to deal with irregular non-escaped stray quote characters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ACCEPT_ONLY_RFC4180_ESCAPED</td>
<td>Default. Accept only specified and RFC 4180-style escaped quote characters.</td>
</tr>
<tr class="row-odd"><td>ACCEPT_STRAY_QUOTES_ASSUMING_NO_DELIMITERS_IN_FIELDS</td>
<td>Accept stray quotes as-is in the field. Instead, it behaves undefined if delimiters are in fields. <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;b&quot;</span></code> goes <code class="docutils literal notranslate"><span class="pre">a&quot;b</span></code>. <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;&quot;b&quot;</span></code> goes <code class="docutils literal notranslate"><span class="pre">a&quot;b</span></code>.</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">columns</span></code> option declares the list of columns. This CSV parser plugin ignores the header line.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>Name of the column</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>Type of the column (see below)</td>
</tr>
<tr class="row-even"><td>format</td>
<td>Format of the timestamp if type is timestamp</td>
</tr>
<tr class="row-odd"><td>date</td>
<td>Set date part if the format doesn’t include date part</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Timestamp format refers to <a class="reference external" href="https://docs.ruby-lang.org/en/2.4.0/Date.html#method-i-strftime">Ruby strftime format</a></p>
</div>
<p>List of types:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>boolean</td>
<td>true or false</td>
</tr>
<tr class="row-odd"><td>long</td>
<td>64-bit signed integers</td>
</tr>
<tr class="row-even"><td>timestamp</td>
<td>Date and time with nano-seconds precision</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>64-bit floating point numbers</td>
</tr>
<tr class="row-even"><td>string</td>
<td>Strings</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">null_string</span></code> option converts certain values to NULL. Values will be converted as following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="21%" />
<col width="22%" />
<col width="13%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">non-quoted empty string</th>
<th class="head">quoted empty string (“”)</th>
<th class="head">non-quoted \N</th>
<th class="head">quoted \N (“\N”)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">null_string:</span> <span class="pre">&quot;&quot;</span></code></td>
<td>NULL</td>
<td>NULL</td>
<td><code class="docutils literal notranslate"><span class="pre">\N</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">\N</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">null_string:</span> <span class="pre">\N</span></code></td>
<td>(empty string)</td>
<td>(empty string)</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">null_string:</span> <span class="pre">null</span></code> (default)</td>
<td>NULL</td>
<td>(empty string)</td>
<td><code class="docutils literal notranslate"><span class="pre">\N</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">\N</span></code></td>
</tr>
</tbody>
</table>
<p>You can use <code class="docutils literal notranslate"><span class="pre">guess</span></code> to automatically generate the column settings. See also <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id46">Example</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&quot;\t&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&#39;NULL&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">skip_header_lines</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">comment_line_marker</span><span class="p p-Indicator">:</span> <span class="s">&#39;#&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">id</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">account</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">time</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">purchase</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y%m%d&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">comment</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">string</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>CSV parser supports <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">'%s'</span></code> to parse UNIX timestamp in seconds (e.g. 1470148959) as timestamp.</p>
<p>However, CSV parser itself can’t parse UNIX timestamp in millisecond (e.g. 1470148959542) as timestamp. You can still parse the column as <code class="docutils literal notranslate"><span class="pre">long</span></code> type first, then apply <a class="reference external" href="https://github.com/sonots/embulk-filter-timestamp_format">timestamp_format</a> filter plugin to convert long to timestamp. Here is an example:</p>
<div class="last highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/my_csv_files</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">timestamp_in_seconds</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%s&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">timestamp_in_millis</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">timestamp_format</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">timestamp_in_millis</span><span class="p p-Indicator">,</span> <span class="nv">from_unit</span><span class="p p-Indicator">:</span> <span class="nv">ms</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="json-parser-plugin">
<h2><a class="toc-backref" href="#id47">JSON parser plugin</a><a class="headerlink" href="#json-parser-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">json</span></code> parser plugin parses a JSON file that contains a sequence of JSON objects. Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="o">:</span><span class="mi">1455829282</span><span class="p">,</span><span class="s2">&quot;ip&quot;</span><span class="o">:</span><span class="s2">&quot;93.184.216.34&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;frsyuki&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="o">:</span><span class="mi">1455829282</span><span class="p">,</span><span class="s2">&quot;ip&quot;</span><span class="o">:</span><span class="s2">&quot;172.36.8.109&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;sadayuki&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="o">:</span><span class="mi">1455829284</span><span class="p">,</span><span class="s2">&quot;ip&quot;</span><span class="o">:</span><span class="s2">&quot;example.com&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Treasure Data&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;time&quot;</span><span class="o">:</span><span class="mi">1455829282</span><span class="p">,</span><span class="s2">&quot;ip&quot;</span><span class="o">:</span><span class="s2">&quot;10.98.43.1&quot;</span><span class="p">,</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;MessagePack&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">json</span></code> parser plugin outputs a single record named “record” (type is json).</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id48">Options</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="6%" />
<col width="62%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stop_on_invalid_record</td>
<td>boolean</td>
<td>Stop bulk load transaction if a file includes invalid record (such as invalid json)</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-odd"><td>invalid_string_escapes</td>
<td>enum</td>
<td>Escape strategy of invalid json string such as using invalid <code class="docutils literal notranslate"><span class="pre">\</span></code> like <code class="docutils literal notranslate"><span class="pre">\a</span></code>. (PASSTHROUGH, SKIP, UNESCAPE)</td>
<td><code class="docutils literal notranslate"><span class="pre">PASSTHROUGH</span></code> by default</td>
</tr>
</tbody>
</table>
<p>if you set invalid_string_escapes and appear invalid JSON string (such as <code class="docutils literal notranslate"><span class="pre">\a</span></code>), it makes following the action.</p>
<table border="1" class="docutils">
<colgroup>
<col width="61%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">invalid_string_escapes</th>
<th class="head">convert to</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PASSTHROUGH <a href="#id6"><span class="problematic" id="id7">*</span></a>1</td>
<td><code class="docutils literal notranslate"><span class="pre">\a</span></code></td>
</tr>
<tr class="row-odd"><td>SKIP</td>
<td>empty string</td>
</tr>
<tr class="row-even"><td>UNESCAPE</td>
<td><code class="docutils literal notranslate"><span class="pre">a</span></code></td>
</tr>
</tbody>
</table>
<p>(*1): Throwing an exception.</p>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id49">Example</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gzip-decoder-plugin">
<h2><a class="toc-backref" href="#id50">Gzip decoder plugin</a><a class="headerlink" href="#gzip-decoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">gzip</span></code> decoder plugin decompresses gzip files before input plugins read them.</p>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id51">Options</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>This plugin doesn’t have any options.</p>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id52">Example</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bzip2-decoder-plugin">
<h2><a class="toc-backref" href="#id53">BZip2 decoder plugin</a><a class="headerlink" href="#bzip2-decoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> decoder plugin decompresses bzip2 files before input plugins read them.</p>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id54">Options</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>This plugin doesn’t have any options.</p>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id55">Example</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">bzip2</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="file-output-plugin">
<h2><a class="toc-backref" href="#id56">File output plugin</a><a class="headerlink" href="#file-output-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">file</span></code> output plugin writes records to local file system.</p>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id57">Options</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="47%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>path_prefix</td>
<td>string</td>
<td>Path prefix of the output files</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>sequence_format</td>
<td>string</td>
<td>Format of the sequence number of the output files</td>
<td><code class="docutils literal notranslate"><span class="pre">%03d.%02d.</span></code> by default</td>
</tr>
<tr class="row-even"><td>file_ext</td>
<td>string</td>
<td>Path suffix of the output files (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;csv&quot;</span></code>)</td>
<td>required</td>
</tr>
</tbody>
</table>
<p>For example, if you set <code class="docutils literal notranslate"><span class="pre">path_prefix:</span> <span class="pre">/path/to/output/sample_</span></code>, <code class="docutils literal notranslate"><span class="pre">sequence_format:</span> <span class="pre">&quot;%03d.%02d.&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">file_ext:</span> <span class="pre">csv</span></code>, name of the output files will be as following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- output
            |-- sample_01.000.csv
            |-- sample_02.000.csv
            |-- sample_03.000.csv
            |-- sample_04.000.csv
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sequence_format</span></code> formats task index and sequence number in a task.</p>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id58">Example</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/output/sample_</span>
  <span class="l l-Scalar l-Scalar-Plain">file_ext</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
  <span class="l l-Scalar l-Scalar-Plain">formatter</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="csv-formatter-plugin">
<h2><a class="toc-backref" href="#id59">CSV formatter plugin</a><a class="headerlink" href="#csv-formatter-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">csv</span></code> formatter plugin formats records using CSV or TSV format.</p>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id60">Options</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="62%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>delimiter</td>
<td>string</td>
<td>Delimiter character such as <code class="docutils literal notranslate"><span class="pre">,</span></code> for CSV, <code class="docutils literal notranslate"><span class="pre">&quot;\t&quot;</span></code> for TSV, <code class="docutils literal notranslate"><span class="pre">&quot;|&quot;</span></code> or any single-byte character</td>
<td><code class="docutils literal notranslate"><span class="pre">,</span></code> by default</td>
</tr>
<tr class="row-odd"><td>quote</td>
<td>string</td>
<td>The character surrounding a quoted value</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;</span></code> by default</td>
</tr>
<tr class="row-even"><td>quote_policy</td>
<td>enum</td>
<td>Policy for quote (ALL, MINIMAL, NONE) (see below)</td>
<td><code class="docutils literal notranslate"><span class="pre">MINIMAL</span></code> by default</td>
</tr>
<tr class="row-odd"><td>escape</td>
<td>string</td>
<td>Escape character to escape quote character</td>
<td>same with quote default (*1)</td>
</tr>
<tr class="row-even"><td>header_line</td>
<td>boolean</td>
<td>If true, write the header line with column name at the first line</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code> by default</td>
</tr>
<tr class="row-odd"><td>null_string</td>
<td>string</td>
<td>Expression of NULL values</td>
<td>empty by default</td>
</tr>
<tr class="row-even"><td>newline</td>
<td>enum</td>
<td>Newline character (CRLF, LF or CR)</td>
<td><code class="docutils literal notranslate"><span class="pre">CRLF</span></code> by default</td>
</tr>
<tr class="row-odd"><td>newline_in_field</td>
<td>enum</td>
<td>Newline character in each field (CRLF, LF, CR)</td>
<td><code class="docutils literal notranslate"><span class="pre">LF</span></code> by default</td>
</tr>
<tr class="row-even"><td>charset</td>
<td>enum</td>
<td>Character encoding (eg. ISO-8859-1, UTF-8)</td>
<td><code class="docutils literal notranslate"><span class="pre">UTF-8</span></code> by default</td>
</tr>
<tr class="row-odd"><td>default_timezone</td>
<td>string</td>
<td>Time zone of timestamp columns. This can be overwritten for each column using <code class="docutils literal notranslate"><span class="pre">column_options</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">UTC</span></code> by default</td>
</tr>
<tr class="row-even"><td>column_options</td>
<td>hash</td>
<td>See bellow</td>
<td>optional</td>
</tr>
</tbody>
</table>
<p>(*1): if quote_policy is NONE, <code class="docutils literal notranslate"><span class="pre">quote</span></code> option is ignored, and default <code class="docutils literal notranslate"><span class="pre">escape</span></code> is <code class="docutils literal notranslate"><span class="pre">\</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">quote_policy</span></code> option is used to determine field type to quote.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ALL</td>
<td>Quote all fields</td>
</tr>
<tr class="row-odd"><td>MINIMAL</td>
<td>Only quote those fields which contain delimiter, quote or any of the characters in lineterminator</td>
</tr>
<tr class="row-even"><td>NONE</td>
<td>Never quote fields. When the delimiter occurs in field, escape with escape char</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">column_options</span></code> option is a map whose keys are name of columns, and values are configuration with following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="59%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>timezone</td>
<td>string</td>
<td>Time zone if type of this column is timestamp. If not set, <code class="docutils literal notranslate"><span class="pre">default\_timezone</span></code> is used.</td>
<td>optional</td>
</tr>
<tr class="row-odd"><td>format</td>
<td>string</td>
<td>Timestamp format if type of this column is timestamp.</td>
<td><code class="docutils literal notranslate"><span class="pre">%Y-%m-%d</span> <span class="pre">%H:%M:%S.%6N</span> <span class="pre">%z</span></code> by default</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Timestamp format refers to <a class="reference external" href="https://docs.ruby-lang.org/en/2.4.0/Date.html#method-i-strftime">Ruby strftime format</a></p>
</div>
</div>
<div class="section" id="id17">
<h3><a class="toc-backref" href="#id61">Example</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">formatter</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&quot;\t&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">newline_in_field</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">LF</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">quote_policy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">MINIMAL</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&quot;\\&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&quot;\\N&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">default_timezone</span><span class="p p-Indicator">:</span> <span class="s">&#39;UTC&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">column_options</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">mycol1</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">mycol2</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">,</span> <span class="nv">timezone</span><span class="p p-Indicator">:</span> <span class="s">&#39;America/Los_Angeles&#39;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gzip-encoder-plugin">
<h2><a class="toc-backref" href="#id62">Gzip encoder plugin</a><a class="headerlink" href="#gzip-encoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">gzip</span></code> encoder plugin compresses output files using gzip.</p>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id63">Options</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>level</td>
<td>integer</td>
<td>Compression level. From 0 (no compression) to 9 (best compression).</td>
<td><code class="docutils literal notranslate"><span class="pre">6</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id64">Example</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">encoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
    <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bzip2-encoder-plugin">
<h2><a class="toc-backref" href="#id65">BZip2 encoder plugin</a><a class="headerlink" href="#bzip2-encoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> encoder plugin compresses output files using bzip2.</p>
<div class="section" id="id20">
<h3><a class="toc-backref" href="#id66">Options</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>level</td>
<td>integer</td>
<td>Compression level. From 1 to 9 (best compression).</td>
<td><code class="docutils literal notranslate"><span class="pre">9</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id21">
<h3><a class="toc-backref" href="#id67">Example</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">encoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bzip2</span>
    <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rename-filter-plugin">
<h2><a class="toc-backref" href="#id68">Rename filter plugin</a><a class="headerlink" href="#rename-filter-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">rename</span></code> filter plugin changes column names. This plugin has no impact on performance.</p>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id69">Options</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>rules</td>
<td>array</td>
<td>An array of rule-based renaming operations. (See below for rules.)</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-odd"><td>columns</td>
<td>hash</td>
<td>A map whose keys are existing column names. values are new names.</td>
<td><code class="docutils literal notranslate"><span class="pre">{}</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="renaming-rules">
<h3><a class="toc-backref" href="#id70">Renaming rules</a><a class="headerlink" href="#renaming-rules" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">rules</span></code> is an array of rules as below applied top-down for all the columns.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">rule</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>character_types</td>
<td>Restrict characters by types. Replace restricted characteres.</td>
</tr>
<tr class="row-odd"><td>first_character_types</td>
<td>Restrict the first character by types. Prefix or replace first restricted characters.</td>
</tr>
<tr class="row-even"><td>lower_to_upper</td>
<td>Convert lower-case alphabets to upper-case.</td>
</tr>
<tr class="row-odd"><td>regex_replace</td>
<td>Replace with a regular expressions.</td>
</tr>
<tr class="row-even"><td>truncate</td>
<td>Truncate.</td>
</tr>
<tr class="row-odd"><td>upper_to_lower</td>
<td>Convert upper-case alphabets to lower-case</td>
</tr>
<tr class="row-even"><td>unique_number_suffix</td>
<td>Make column names unique in the schema.</td>
</tr>
</tbody>
</table>
<div class="section" id="renaming-rule-character-types">
<h4>Renaming rule: character_types<a class="headerlink" href="#renaming-rule-character-types" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">character_types</span></code> replaces restricted characters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="78%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pass_characteres</td>
<td>Characters to be allowed.</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> by default</td>
</tr>
<tr class="row-odd"><td>pass_types</td>
<td>Sets of characters to be allowed. The array must consist of “a-z” (lower-case alphabets), “A-Z” (upper-case alphabets), or “0-9” (digits).</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-even"><td>replace</td>
<td>A character that disallowed characters are replaced with. It must consist of just 1 character.</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;_&quot;</span></code> by default</td>
</tr>
</tbody>
</table>
<div class="section" id="id23">
<h5>Example<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration replaces characters into &quot;_&quot; except for &quot;_&quot;, lower-case alphabets, and digits.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">character_types</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_characters</span><span class="p p-Indicator">:</span> <span class="s">&quot;_&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;a-z&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;0-9&quot;</span> <span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-first-character-types">
<h4>Renaming rule: first_character_types<a class="headerlink" href="#renaming-rule-first-character-types" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">first_character_types</span></code> prefixes or replaces a restricted character at the beginning.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="68%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pass_characteres</td>
<td>Characters to be allowed.</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> by default</td>
</tr>
<tr class="row-odd"><td>pass_types</td>
<td>Sets of characters to be allowed. The array must consist of “a-z” (lower-case alphabets), “A-Z” (upper-case alphabets), or “0-9” (digits).</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-even"><td>prefix</td>
<td>A character that a disallowed first character is replaced with.</td>
<td>one of <code class="docutils literal notranslate"><span class="pre">prefix</span></code> or <code class="docutils literal notranslate"><span class="pre">replace</span></code> is required</td>
</tr>
<tr class="row-odd"><td>replace</td>
<td>A character that a disallowed first character is prefixed with.</td>
<td>one of <code class="docutils literal notranslate"><span class="pre">prefix</span></code> or <code class="docutils literal notranslate"><span class="pre">replace</span></code> is required</td>
</tr>
</tbody>
</table>
<div class="section" id="id24">
<h5>Example<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration prefixes a column name with &quot;_&quot; unless the name starts from &quot;_&quot; or a lower-case alphabet.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">first_character_types</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_characters</span><span class="p p-Indicator">:</span> <span class="s">&quot;_&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;a-z&quot;</span> <span class="p p-Indicator">]</span>
      <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="s">&quot;_&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-lower-to-upper">
<h4>Renaming rule: lower_to_upper<a class="headerlink" href="#renaming-rule-lower-to-upper" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">lower_to_upper</span></code> converts lower-case alphabets to upper-case.</p>
<div class="section" id="id25">
<h5>Example<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration converts all lower-case alphabets to upper-case.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">lower_to_upper</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-regex-replace">
<h4>Renaming rule: regex_replace<a class="headerlink" href="#renaming-rule-regex-replace" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">regex_replace</span></code> replaces column names based on a regular expression.</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="87%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>match</td>
<td>A <a class="reference external" href="https://docs.oracle.com/javase/tutorial/essential/regex/">Java-style regular expression</a> to which this string is to be matched.</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>replace</td>
<td>A string to be substibuted for each match in Java-style.</td>
<td>required</td>
</tr>
</tbody>
</table>
<div class="section" id="id26">
<h5>Example<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration replaces all patterns</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">regex_replace</span>
      <span class="l l-Scalar l-Scalar-Plain">match</span><span class="p p-Indicator">:</span> <span class="s">&quot;([0-9]+)_dollars&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">replace</span><span class="p p-Indicator">:</span> <span class="s">&quot;USD$1&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-truncate">
<h4>Renaming rule: truncate<a class="headerlink" href="#renaming-rule-truncate" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">truncate</span></code> truncates column names.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="62%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>max_length</td>
<td>The length to which the column names are truncated.</td>
<td><code class="docutils literal notranslate"><span class="pre">128</span></code> by default</td>
</tr>
</tbody>
</table>
<div class="section" id="id27">
<h5>Example<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration drops all characters after the 20th character.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">truncate</span>
      <span class="l l-Scalar l-Scalar-Plain">max_length</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-upper-to-lower">
<h4>Renaming rule: upper_to_lower<a class="headerlink" href="#renaming-rule-upper-to-lower" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">upper_to_lower</span></code> converts upper-case alphabets to lower-case.</p>
<div class="section" id="id28">
<h5>Example<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration converts all upper-case alphabets to lower-case.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">upper_to_lower</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="renaming-rule-unique-number-suffix">
<h4>Renaming rule: unique_number_suffix<a class="headerlink" href="#renaming-rule-unique-number-suffix" title="Permalink to this headline">¶</a></h4>
<p>The rule <code class="docutils literal notranslate"><span class="pre">unique_number_suffix</span></code> makes column names unique in the schema by suffixing numbers.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="80%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>delimiter</td>
<td>A delimiter character inserted before a suffix number. It must be just 1 non-digit character.</td>
<td><code class="docutils literal notranslate"><span class="pre">&quot;_&quot;</span></code> by default</td>
</tr>
<tr class="row-odd"><td>digits</td>
<td>An integer that specifies the number of zero-filled digits of a suffix number. The suffix number zero-filled to the digits.</td>
<td>optional</td>
</tr>
<tr class="row-even"><td>max_length</td>
<td>The length to which the column names are truncated. The column name is truncated before the suffix number.</td>
<td>optional</td>
</tr>
<tr class="row-odd"><td>offset</td>
<td>An integer where the suffix number starts. The first duplicative column name is suffixed by (<code class="docutils literal notranslate"><span class="pre">`offset`</span></code> + 1).</td>
<td><code class="docutils literal notranslate"><span class="pre">1</span></code> by default</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>The procedure to make column names unique is not very trivial. There are many feasible ways. This renaming rule works as follows:</p>
<p>Basic policies:</p>
<ul class="simple">
<li>Suffix numbers are counted per original column name.</li>
<li>Column names are fixed from the first column to the last column.</li>
</ul>
<p>Actual procedure applied from the first (leftmost) column to the last (rightmost) column:</p>
<ol class="last arabic simple">
<li>Fix the column name as-is with truncating if the truncated name is not duplicated with left columns.</li>
<li>Suffix the column name otherwise.<ol class="loweralpha">
<li>Try to append the suffix number for the original column name with truncating.</li>
<li>Fix it if the suffixed name is not duplicated with left columns nor original columns.</li>
<li>Retry (a) with the suffix number increased otherwise.</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="id29">
<h5>Example<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration suffixes numbers to duplicative column names. (Ex. [&quot;column&quot;, &quot;column&quot;, &quot;column&quot;] goes to [&quot;column&quot;, &quot;column_2&quot;, &quot;column_3&quot;].)</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">unique_number_suffix</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="example-of-renaming-rules">
<h3><a class="toc-backref" href="#id71">Example of renaming rules</a><a class="headerlink" href="#example-of-renaming-rules" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">upper_to_lower</span>        <span class="c1"># All upper-case are converted to lower-case.</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">character_types</span>       <span class="c1"># Only lower-case, digits and &quot;_&quot; are allowed. (No upper-case by the rule ahove.)</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_types</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;a-z&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;0-9&quot;</span> <span class="p p-Indicator">]</span>
      <span class="l l-Scalar l-Scalar-Plain">pass_characters</span><span class="p p-Indicator">:</span> <span class="s">&quot;_&quot;</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">rule</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">unique_number_suffix</span>  <span class="c1"># Ensure all column names are unique.</span>
</pre></div>
</div>
</div>
<div class="section" id="columns-not-recommended">
<h3><a class="toc-backref" href="#id72">Columns: not recommended</a><a class="headerlink" href="#columns-not-recommended" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">columns</span></code> is not recommended to use anymore. Consider using <code class="docutils literal notranslate"><span class="pre">rules</span></code> instead.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">my_existing_column1</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">new_column1</span>
      <span class="l l-Scalar l-Scalar-Plain">my_existing_column2</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">new_column2</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">columns</span></code> are applied before <code class="docutils literal notranslate"><span class="pre">rules</span></code> if <code class="docutils literal notranslate"><span class="pre">columns</span></code> and <code class="docutils literal notranslate"><span class="pre">rules</span></code> are specified together. (It is discouraged to specify them together, though.)</p>
</div>
</div>
</div>
<div class="section" id="remove-columns-filter-plugin">
<h2><a class="toc-backref" href="#id73">Remove columns filter plugin</a><a class="headerlink" href="#remove-columns-filter-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">remove_columns</span></code> filter plugin removes columns from schema.</p>
<div class="section" id="id30">
<h3><a class="toc-backref" href="#id74">Options</a><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="8%" />
<col width="50%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>remove</td>
<td>array</td>
<td>An array of names of columns that it removes from schema.</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-odd"><td>keep</td>
<td>array</td>
<td>An array of names of columns that it keeps in schema.</td>
<td><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-even"><td>accept_unmatched_columns</td>
<td>boolean</td>
<td>If true, skip columns that aren’t included in schemas.</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code> by default</td>
</tr>
</tbody>
</table>
<p>remove: and keep: options are not multi-select.</p>
</div>
<div class="section" id="id31">
<h3><a class="toc-backref" href="#id75">Example</a><a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This configuration removes &quot;_c0&quot; and &quot;_c1&quot; named columns from schema.</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">remove_columns</span>
    <span class="l l-Scalar l-Scalar-Plain">remove</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;_c0&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;_c1&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="local-executor-plugin">
<h2><a class="toc-backref" href="#id76">Local executor plugin</a><a class="headerlink" href="#local-executor-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">local</span></code> executor plugin runs tasks using local threads. This is the only built-in executor plugin.</p>
<div class="section" id="id32">
<h3><a class="toc-backref" href="#id77">Options</a><a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="7%" />
<col width="51%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>max_threads</td>
<td>integer</td>
<td>Maximum number of threads to run concurrently.</td>
<td>2x of available CPU cores by default</td>
</tr>
<tr class="row-odd"><td>min_output_tasks</td>
<td>integer</td>
<td>Mimimum number of output tasks to enable page scattering.</td>
<td>1x of available CPU cores by default</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">max_threads</span></code> option controls maximum concurrency. Setting smaller number here is useful if too many threads make the destination or source storage overloaded. Setting larger number here is useful if CPU utilization is too low due to high latency.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">min_output_tasks</span></code> option enables “page scattering”. The feature is enabled if number of input tasks is less than <code class="docutils literal notranslate"><span class="pre">min_output_tasks</span></code>. It uses multiple filter &amp; output threads for each input task so that one input task can use multiple threads. Setting larger number here is useful if embulk doesn’t use multi-threading with enough concurrency due to too few number of input tasks. Setting 1 here disables page scattering completely.</p>
</div>
<div class="section" id="id33">
<h3><a class="toc-backref" href="#id78">Example</a><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">exec</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">max_threads</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>         <span class="c1"># run at most 8 tasks concurrently</span>
  <span class="l l-Scalar l-Scalar-Plain">min_output_tasks</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>    <span class="c1"># disable page scattering</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="guess-executor">
<h2><a class="toc-backref" href="#id79">Guess executor</a><a class="headerlink" href="#guess-executor" title="Permalink to this headline">¶</a></h2>
<p>The guess executor is called by <code class="docutils literal notranslate"><span class="pre">guess</span></code> command. It executes default guess plugins in a sequential order and suggests Embulk config by appropriate guess plugin. The default guess plugins and the order are <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">'bzip2</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code> and <code class="docutils literal notranslate"><span class="pre">csv</span></code>.</p>
<div class="section" id="id34">
<h3><a class="toc-backref" href="#id80">Options</a><a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="2%" />
<col width="4%" />
<col width="2%" />
<col width="46%" />
<col width="2%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head" colspan="2">type</th>
<th class="head" colspan="2">description</th>
<th class="head" colspan="2">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>guess_plugins</td>
<td colspan="2">array</td>
<td colspan="2"><code class="docutils literal notranslate"><span class="pre">guess</span></code> command uses specified guess plugins.</td>
<td colspan="2"><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-odd"><td>exclude_guess_plugins</td>
<td colspan="2">array</td>
<td colspan="2"><code class="docutils literal notranslate"><span class="pre">guess</span></code> command doesn’t use specified plugins.</td>
<td colspan="2"><code class="docutils literal notranslate"><span class="pre">[]</span></code> by default</td>
</tr>
<tr class="row-even"><td colspan="7">guess_sample_buffer_bytes | int      | Bytes of sample buffer that it tries to read from input source.      | 32768 (32KB) by default</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">guess_plugins</span></code> option includes specified guess plugin in the bottom of the list of default guess plugins.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">exclude_guess_plugins</span></code> option exclude specified guess plugins from the list of default guess plugins that the guess executor uses.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">guess_sample_buffer_bytes</span></code> option controls the bytes of sample buffer that GuessExecutor tries to read from specified input source.</p>
<p>This example shows how to use <code class="docutils literal notranslate"><span class="pre">csv_all_strings</span></code> guess plugin, which suggests column types within CSV files as string types. It needs to be explicitly specified by users when it’s used instead of <code class="docutils literal notranslate"><span class="pre">csv</span></code> guess plugin because the plugin is not included in default guess plugins. We also can exclude default <code class="docutils literal notranslate"><span class="pre">csv</span></code> guess plugin.</p>
</div>
<div class="section" id="id35">
<h3><a class="toc-backref" href="#id81">Example</a><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">exec</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">guess_plugins</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;csv_all_strings&#39;</span><span class="p p-Indicator">]</span>
  <span class="l l-Scalar l-Scalar-Plain">exclude_guess_plugins</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;csv&#39;</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="preview-executor">
<h2><a class="toc-backref" href="#id82">Preview executor</a><a class="headerlink" href="#preview-executor" title="Permalink to this headline">¶</a></h2>
<p>The preview executor is called by <code class="docutils literal notranslate"><span class="pre">preview</span></code> command. It tries to read sample buffer from a specified input source and writes them to Page objects. <code class="docutils literal notranslate"><span class="pre">preview</span></code> outputs the Page objects to console.</p>
<div class="section" id="id36">
<h3><a class="toc-backref" href="#id83">Options</a><a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="7%" />
<col width="47%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>preview_sample_buffer_bytes</td>
<td>int</td>
<td>Bytes of sample buffer that it tries to read from input source.</td>
<td>32768 (32KB) by default</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">preview_sample_buffer_bytes</span></code> option controls the bytes of sample buffer that PreviewExecutor tries to read from specified input source.</p>
<p>This example shows how to change the bytes of sample buffer.</p>
</div>
<div class="section" id="id37">
<h3><a class="toc-backref" href="#id84">Example</a><a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">exec</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">preview_sample_buffer_bytes</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">65536</span> <span class="c1"># 64KB</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="recipe/scheduled-csv-load-to-elasticsearch-kibana5.html">Scheduled bulk data loading to Elasticsearch + Kibana 5 from CSV files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="release.html">Release Notes</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Embulk Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>