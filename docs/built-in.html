<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &#8212; Embulk 0.8 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Embulk 0.8 documentation" href="index.html" />
    <link rel="next" title="Customization" href="customization.html" />
    <link rel="prev" title="Scheduled bulk data loading to Elasticsearch + Kibana 4 from CSV files" href="recipe/scheduled-csv-load-to-elasticsearch-kibana4.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Embulk 0.8 documentation</span></a></h1>
        <h2 class="heading"><span>Configuration</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="recipe/scheduled-csv-load-to-elasticsearch-kibana4.html">Scheduled bulk data loading to Elasticsearch + Kibana 4 from CSV files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="customization.html">Customization</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#embulk-configuration-file-format" id="id27">Embulk configuration file format</a><ul>
<li><a class="reference internal" href="#using-variables" id="id28">Using variables</a></li>
<li><a class="reference internal" href="#including-files" id="id29">Including files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-file-input-plugin" id="id30">Local file input plugin</a><ul>
<li><a class="reference internal" href="#options" id="id31">Options</a></li>
<li><a class="reference internal" href="#example" id="id32">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#csv-parser-plugin" id="id33">CSV parser plugin</a><ul>
<li><a class="reference internal" href="#id3" id="id34">Options</a></li>
<li><a class="reference internal" href="#id5" id="id35">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-parser-plugin" id="id36">JSON parser plugin</a><ul>
<li><a class="reference internal" href="#id6" id="id37">Options</a></li>
<li><a class="reference internal" href="#id7" id="id38">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gzip-decoder-plugin" id="id39">Gzip decoder plugin</a><ul>
<li><a class="reference internal" href="#id8" id="id40">Options</a></li>
<li><a class="reference internal" href="#id9" id="id41">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bzip2-decoder-plugin" id="id42">BZip2 decoder plugin</a><ul>
<li><a class="reference internal" href="#id10" id="id43">Options</a></li>
<li><a class="reference internal" href="#id11" id="id44">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-output-plugin" id="id45">File output plugin</a><ul>
<li><a class="reference internal" href="#id12" id="id46">Options</a></li>
<li><a class="reference internal" href="#id13" id="id47">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#csv-formatter-plugin" id="id48">CSV formatter plugin</a><ul>
<li><a class="reference internal" href="#id14" id="id49">Options</a></li>
<li><a class="reference internal" href="#id15" id="id50">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gzip-encoder-plugin" id="id51">Gzip encoder plugin</a><ul>
<li><a class="reference internal" href="#id16" id="id52">Options</a></li>
<li><a class="reference internal" href="#id17" id="id53">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18" id="id54">Gzip encoder plugin</a><ul>
<li><a class="reference internal" href="#id19" id="id55">Options</a></li>
<li><a class="reference internal" href="#id20" id="id56">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bzip2-encoder-plugin" id="id57">BZip2 encoder plugin</a><ul>
<li><a class="reference internal" href="#id21" id="id58">Options</a></li>
<li><a class="reference internal" href="#id22" id="id59">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rename-filter-plugin" id="id60">Rename filter plugin</a><ul>
<li><a class="reference internal" href="#id23" id="id61">Options</a></li>
<li><a class="reference internal" href="#id24" id="id62">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-executor-plugin" id="id63">Local executor plugin</a><ul>
<li><a class="reference internal" href="#id25" id="id64">Options</a></li>
<li><a class="reference internal" href="#id26" id="id65">Example</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="embulk-configuration-file-format">
<h2><a class="toc-backref" href="#id27">Embulk configuration file format</a><a class="headerlink" href="#embulk-configuration-file-format" title="Permalink to this headline">¶</a></h2>
<p>Embulk uses a YAML file to define a bulk data loading. Here is an example of the file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">./mydata/csv/</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&#39;,&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&#39;NULL&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">skip_header_lines</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">id</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">account</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">time</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">purchase</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y%m%d&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">comment</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">string</span><span class="p p-Indicator">}</span>
<span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">speedometer</span>
    <span class="l l-Scalar l-Scalar-Plain">speed_limit</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">250000</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stdout</span>
</pre></div>
</div>
<p>A configuration file consists of following sections:</p>
<ul class="simple">
<li><strong>in:</strong> Input plugin options. An input plugin is either record-based (<a class="reference external" href="https://github.com/embulk/embulk-input-jdbc">MySQL</a>, <a class="reference external" href="https://github.com/lulichn/embulk-input-dynamodb">DynamoDB</a>, etc) or file-based (<a class="reference external" href="https://github.com/embulk/embulk-input-s3">S3</a>, <a class="reference external" href="https://github.com/takumakanari/embulk-input-http">HTTP</a>, etc).<ul>
<li><strong>parser:</strong> If the input is file-based, parser plugin parses a file format (built-in csv, <a class="reference external" href="https://github.com/takumakanari/embulk-parser-json">json</a>, etc).</li>
<li><strong>decoder:</strong> If the input is file-based, decoder plugin decodes compression or encryption (built-in gzip, bzip2, <a class="reference external" href="https://github.com/hata/embulk-decoder-commons-compress">zip</a>, <a class="reference external" href="https://github.com/hata/embulk-decoder-commons-compress">tar.gz</a>, etc).</li>
</ul>
</li>
<li><strong>out:</strong> Output plugin options. An output plugin is either record-based (<a class="reference external" href="https://github.com/embulk/embulk-output-jdbc">Oracle</a>, <a class="reference external" href="https://github.com/muga/embulk-output-elasticsearch">Elasticsearch</a>, etc) or file-based (<a class="reference external" href="https://github.com/hakobera/embulk-output-gcs">Google Cloud Storage</a>, <a class="reference external" href="https://github.com/embulk/embulk-output-command">Command</a>, etc)<ul>
<li><strong>formatter:</strong> If the output is file-based, formatter plugin formats a file format (such as built-in csv, <a class="reference external" href="https://github.com/takei-yuya/embulk-formatter-jsonl">JSON</a>)</li>
<li><strong>encoder:</strong> If the output is file-based, encoder plugin encodes compression or encryption (such as built-in gzip or bzip2)</li>
</ul>
</li>
<li><strong>filters:</strong> Filter plugins options (optional).</li>
<li><strong>exec:</strong> Executor plugin options. An executor plugin control parallel processing (such as built-in thread executor, <a class="reference external" href="https://github.com/embulk/embulk-executor-mapreduce">Hadoop MapReduce executor</a>)</li>
</ul>
<p>In many cases, what you need to write is <strong>in:</strong>, <strong>out</strong>: and <strong>formatter</strong> sections only because <code class="docutils literal"><span class="pre">guess</span></code> command guesses <strong>parser</strong> and <strong>decoder</strong> options for you. See also the <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
<div class="section" id="using-variables">
<h3><a class="toc-backref" href="#id28">Using variables</a><a class="headerlink" href="#using-variables" title="Permalink to this headline">¶</a></h3>
<p>You can embed environment variables in configuration file using <a class="reference external" href="http://liquidmarkup.org/">Liquid template engine</a> (This is experimental feature. Behavior might change or be removed in future releases).</p>
<p>To use template engine, configuration file name must end with <code class="docutils literal"><span class="pre">.yml.liquid</span></code>.</p>
<p>Environment variables are set to <code class="docutils literal"><span class="pre">env</span></code> variable.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.path_prefix</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">postgresql</span>
  <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_host</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_port</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">user</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_user</span> <span class="p p-Indicator">}}</span>
  <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">env.pg_password</span><span class="nv"> </span><span class="s">}}&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">database</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">embulk_load</span>
  <span class="l l-Scalar l-Scalar-Plain">mode</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">insert</span>
  <span class="l l-Scalar l-Scalar-Plain">table</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{{</span> <span class="nv">env.pg_table</span> <span class="p p-Indicator">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="including-files">
<h3><a class="toc-backref" href="#id29">Including files</a><a class="headerlink" href="#including-files" title="Permalink to this headline">¶</a></h3>
<p>Configuration file can include another configuration file. To use it, configuration file name must end with <code class="docutils literal"><span class="pre">.yml.liquid</span></code>.</p>
<p>File will be searched from the relative path of the input configuration file. And file name will be <code class="docutils literal"><span class="pre">_&lt;name&gt;.yml.liquid</span></code>. For example, if you add <code class="docutils literal"><span class="pre">{%</span> <span class="pre">include</span> <span class="pre">'subdir/inc'</span> <span class="pre">%}</span></code> tag to <code class="docutils literal"><span class="pre">myconfig/config.yml.liquid</span></code> file, it includes <code class="docutils literal"><span class="pre">myconfig/subdir/_inc.yml.liquid</span></code> file.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span># config.yml.liquid
{% include &#39;in_mysql&#39; %}
out:
  type: stdout
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># _in_mysql.yml.liquid</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql</span>
</pre></div>
</div>
<p>With above 2 files, actual configuration file will be:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># $ embulk run config.yml.liquid</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stdout</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="local-file-input-plugin">
<h2><a class="toc-backref" href="#id30">Local file input plugin</a><a class="headerlink" href="#local-file-input-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">file</span></code> input plugin reads files from local file system.</p>
<div class="section" id="options">
<h3><a class="toc-backref" href="#id31">Options</a><a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="56%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>path_prefix</td>
<td>string</td>
<td>Path prefix of input files</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>parsers</td>
<td>hash</td>
<td>Parsers configurations (see below)</td>
<td>required</td>
</tr>
<tr class="row-even"><td>decoders</td>
<td>array</td>
<td>Decoder configuration (see below)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>last_path</td>
<td>string</td>
<td>Name of last read file in previous operation</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">path_prefix</span></code> option is required. If you have files as following, you may set <code class="docutils literal"><span class="pre">path_prefix:</span> <span class="pre">/path/to/files/sample_</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- files
            |-- sample_01.csv   -&gt; read
            |-- sample_02.csv   -&gt; read
            |-- sample_03.csv   -&gt; read
            |-- sample_04.csv   -&gt; read
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">last_path</span></code> option is used to skip files older than or same with the file in dictionary order.
For example, if you set <code class="docutils literal"><span class="pre">last_path:</span> <span class="pre">/path/to/files/sample_02.csv</span></code>, Embulk reads following files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- files
            |-- sample_01.csv   -&gt; skip
            |-- sample_02.csv   -&gt; skip
            |-- sample_03.csv   -&gt; read
            |-- sample_04.csv   -&gt; read
</pre></div>
</div>
</div>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id32">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/files/sample_</span>
  <span class="l l-Scalar l-Scalar-Plain">last_path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/files/sample_02.csv</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>In most of cases, you&#8217;ll use guess to configure the parsers and decoders. See also <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
</div>
</div>
<div class="section" id="csv-parser-plugin">
<h2><a class="toc-backref" href="#id33">CSV parser plugin</a><a class="headerlink" href="#csv-parser-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">csv</span></code> parser plugin parses CSV and TSV files.</p>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id34">Options</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="6%" />
<col width="63%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>delimiter</td>
<td>string</td>
<td>Delimiter character such as <code class="docutils literal"><span class="pre">,</span></code> for CSV, <code class="docutils literal"><span class="pre">&quot;\t&quot;</span></code> for TSV, <code class="docutils literal"><span class="pre">&quot;|&quot;</span></code></td>
<td><code class="docutils literal"><span class="pre">,</span></code> by default</td>
</tr>
<tr class="row-odd"><td>quote</td>
<td>string</td>
<td>The character surrounding a quoted value. Setting <code class="docutils literal"><span class="pre">null</span></code> disables quoting.</td>
<td><code class="docutils literal"><span class="pre">&quot;</span></code> by default</td>
</tr>
<tr class="row-even"><td>escape</td>
<td>string</td>
<td>Escape character to escape a special character. Setting <code class="docutils literal"><span class="pre">null</span></code> disables escaping.</td>
<td><code class="docutils literal"><span class="pre">\\</span></code> by default</td>
</tr>
<tr class="row-odd"><td>skip_header_lines</td>
<td>integer</td>
<td>Skip this number of lines first. Set 1 if the file has header line.</td>
<td><code class="docutils literal"><span class="pre">0</span></code> by default</td>
</tr>
<tr class="row-even"><td>null_string</td>
<td>string</td>
<td>If a value is this string, converts it to NULL. For example, set <code class="docutils literal"><span class="pre">\N</span></code> for CSV files created by mysqldump</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>trim_if_not_quoted</td>
<td>boolean</td>
<td>If true, remove spaces of a value if the value is not surrounded by the quote character</td>
<td><code class="docutils literal"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-even"><td>comment_line_marker</td>
<td>string</td>
<td>Skip a line if the line begins with this string</td>
<td>null by default</td>
</tr>
<tr class="row-odd"><td>allow_optional_columns</td>
<td>boolean</td>
<td>If true, set null to insufficient columns. Otherwise, skip the row in case of insufficient number of columns</td>
<td><code class="docutils literal"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-even"><td>allow_extra_columns</td>
<td>boolean</td>
<td>If true, ignore too many columns. Otherwise, skip the row in case of too many columns</td>
<td><code class="docutils literal"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-odd"><td>max_quoted_size_limit</td>
<td>integer</td>
<td>Maximum number of bytes of a quoted value. If a value exceeds the limit, the row will be skipped</td>
<td><code class="docutils literal"><span class="pre">131072</span></code> by default</td>
</tr>
<tr class="row-even"><td>stop_on_invalid_record</td>
<td>boolean</td>
<td>Stop bulk load transaction if a file includes invalid record (such as invalid timestamp)</td>
<td><code class="docutils literal"><span class="pre">false</span></code> by default</td>
</tr>
<tr class="row-odd"><td>default_timezone</td>
<td>string</td>
<td>Time zone of timestamp columns if the value itself doesn&#8217;t include time zone description (eg. Asia/Tokyo)</td>
<td><code class="docutils literal"><span class="pre">UTC</span></code> by default</td>
</tr>
<tr class="row-even"><td>default_date</td>
<td>string</td>
<td>Set date part if the format doesn’t include date part.</td>
<td><code class="docutils literal"><span class="pre">1970-01-01</span></code> by default</td>
</tr>
<tr class="row-odd"><td>newline</td>
<td>enum</td>
<td>Newline character (CRLF, LF or CR)</td>
<td><code class="docutils literal"><span class="pre">CRLF</span></code> by default</td>
</tr>
<tr class="row-even"><td>charset</td>
<td>enum</td>
<td>Character encoding (eg. ISO-8859-1, UTF-8)</td>
<td><code class="docutils literal"><span class="pre">UTF-8</span></code> by default</td>
</tr>
<tr class="row-odd"><td>columns</td>
<td>hash</td>
<td>Columns (see below)</td>
<td>required</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">columns</span></code> option declares the list of columns. This CSV parser plugin ignores the header line.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>Name of the column</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>Type of the column (see below)</td>
</tr>
<tr class="row-even"><td>format</td>
<td>Format of the timestamp if type is timestamp</td>
</tr>
<tr class="row-odd"><td>date</td>
<td>Set date part if the format doesn’t include date part</td>
</tr>
</tbody>
</table>
<p>List of types:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>boolean</td>
<td>true or false</td>
</tr>
<tr class="row-odd"><td>long</td>
<td>64-bit signed integers</td>
</tr>
<tr class="row-even"><td>timestamp</td>
<td>Date and time with nano-seconds precision</td>
</tr>
<tr class="row-odd"><td>double</td>
<td>64-bit floating point numbers</td>
</tr>
<tr class="row-even"><td>string</td>
<td>Strings</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">null_string</span></code> option converts certain values to NULL. Values will be converted as following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="21%" />
<col width="22%" />
<col width="13%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">non-quoted empty string</th>
<th class="head">quoted empty string (&#8220;&#8221;)</th>
<th class="head">non-quoted \N</th>
<th class="head">quoted \N (&#8220;\N&#8221;)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">null_string:</span> <span class="pre">&quot;&quot;</span></code></td>
<td>NULL</td>
<td>NULL</td>
<td><code class="docutils literal"><span class="pre">\N</span></code></td>
<td><code class="docutils literal"><span class="pre">\N</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">null_string:</span> <span class="pre">\N</span></code></td>
<td>(empty string)</td>
<td>(empty string)</td>
<td>NULL</td>
<td>NULL</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">null_string:</span> <span class="pre">null</span></code> (default)</td>
<td>NULL</td>
<td>(empty string)</td>
<td><code class="docutils literal"><span class="pre">\N</span></code></td>
<td><code class="docutils literal"><span class="pre">\N</span></code></td>
</tr>
</tbody>
</table>
<p>You can use <code class="docutils literal"><span class="pre">guess</span></code> to automatically generate the column settings. See also <a class="reference external" href="https://github.com/embulk/embulk#quick-start">Quick Start</a>.</p>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id35">Example</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&quot;\t&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&#39;NULL&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">skip_header_lines</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="l l-Scalar l-Scalar-Plain">comment_line_marker</span><span class="p p-Indicator">:</span> <span class="s">&#39;#&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">id</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">account</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">long</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">time</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">purchase</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">timestamp</span><span class="p p-Indicator">,</span> <span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y%m%d&#39;</span><span class="p p-Indicator">}</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">name</span><span class="p p-Indicator">:</span> <span class="nv">comment</span><span class="p p-Indicator">,</span> <span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">string</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-parser-plugin">
<h2><a class="toc-backref" href="#id36">JSON parser plugin</a><a class="headerlink" href="#json-parser-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">json</span></code> parser plugin parses a JSON file that contains a sequence of JSON objects. Example:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span>{&quot;time&quot;:1455829282,&quot;ip&quot;:&quot;93.184.216.34&quot;,&quot;name&quot;:frsyuki}
{&quot;time&quot;:1455829282,&quot;ip&quot;:&quot;172.36.8.109&quot;:sadayuki}
{&quot;time&quot;:1455829284,&quot;ip&quot;:&quot;example.com&quot;,&quot;name&quot;:Treasure Data}
{&quot;time&quot;:1455829282,&quot;ip&quot;:&quot;10.98.43.1&quot;,&quot;name&quot;:MessagePack}
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">json</span></code> parser plugin outputs a single record named &#8220;record&#8221; (type is json).</p>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id37">Options</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="6%" />
<col width="64%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stop_on_invalid_record</td>
<td>boolean</td>
<td>Stop bulk load transaction if a file includes invalid record (such as invalid json)</td>
<td><code class="docutils literal"><span class="pre">false</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id38">Example</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">parser</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gzip-decoder-plugin">
<h2><a class="toc-backref" href="#id39">Gzip decoder plugin</a><a class="headerlink" href="#gzip-decoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">gzip</span></code> decoder plugin decompresses gzip files before input plugins read them.</p>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id40">Options</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>This plugin doesn&#8217;t have any options.</p>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id41">Example</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">gzip</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bzip2-decoder-plugin">
<h2><a class="toc-backref" href="#id42">BZip2 decoder plugin</a><a class="headerlink" href="#bzip2-decoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">bzip2</span></code> decoder plugin decompresses bzip2 files before input plugins read them.</p>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id43">Options</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>This plugin doesn&#8217;t have any options.</p>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id44">Example</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">decoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nv">type</span><span class="p p-Indicator">:</span> <span class="nv">bzip2</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="file-output-plugin">
<h2><a class="toc-backref" href="#id45">File output plugin</a><a class="headerlink" href="#file-output-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">file</span></code> output plugin writes records to local file system.</p>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id46">Options</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="47%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>path_prefix</td>
<td>string</td>
<td>Path prefix of the output files</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>sequence_format</td>
<td>string</td>
<td>Format of the sequence number of the output files</td>
<td><code class="docutils literal"><span class="pre">%03d.%02d.</span></code> by default</td>
</tr>
<tr class="row-even"><td>file_ext</td>
<td>string</td>
<td>Path suffix of the output files (e.g. <code class="docutils literal"><span class="pre">&quot;csv&quot;</span></code>)</td>
<td>required</td>
</tr>
</tbody>
</table>
<p>For example, if you set <code class="docutils literal"><span class="pre">path_prefix:</span> <span class="pre">/path/to/output/sample_</span></code>, <code class="docutils literal"><span class="pre">sequence_format:</span> <span class="pre">&quot;%03d.%02d.&quot;</span></code>, and <code class="docutils literal"><span class="pre">file_ext:</span> <span class="pre">csv</span></code>, name of the output files will be as following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>.
`-- path
    `-- to
        `-- output
            |-- sample_01.000.csv
            |-- sample_02.000.csv
            |-- sample_03.000.csv
            |-- sample_04.000.csv
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">sequence_format</span></code> formats task index and sequence number in a task.</p>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id47">Example</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="l l-Scalar l-Scalar-Plain">path_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/output/sample_</span>
  <span class="l l-Scalar l-Scalar-Plain">file_ext</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
  <span class="l l-Scalar l-Scalar-Plain">formatter</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="csv-formatter-plugin">
<h2><a class="toc-backref" href="#id48">CSV formatter plugin</a><a class="headerlink" href="#csv-formatter-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">csv</span></code> formatter plugin formats records using CSV or TSV format.</p>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id49">Options</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="62%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>delimiter</td>
<td>string</td>
<td>Delimiter character such as <code class="docutils literal"><span class="pre">,</span></code> for CSV, <code class="docutils literal"><span class="pre">&quot;\t&quot;</span></code> for TSV, <code class="docutils literal"><span class="pre">&quot;|&quot;</span></code> or any single-byte character</td>
<td><code class="docutils literal"><span class="pre">,</span></code> by default</td>
</tr>
<tr class="row-odd"><td>quote</td>
<td>string</td>
<td>The character surrounding a quoted value</td>
<td><code class="docutils literal"><span class="pre">&quot;</span></code> by default</td>
</tr>
<tr class="row-even"><td>quote_policy</td>
<td>enum</td>
<td>Policy for quote (ALL, MINIMAL, NONE) (see below)</td>
<td><code class="docutils literal"><span class="pre">MINIMAL</span></code> by default</td>
</tr>
<tr class="row-odd"><td>escape</td>
<td>string</td>
<td>Escape character to escape quote character</td>
<td>same with quote default (*1)</td>
</tr>
<tr class="row-even"><td>header_line</td>
<td>boolean</td>
<td>If true, write the header line with column name at the first line</td>
<td><code class="docutils literal"><span class="pre">true</span></code> by default</td>
</tr>
<tr class="row-odd"><td>null_string</td>
<td>string</td>
<td>Expression of NULL values</td>
<td>empty by default</td>
</tr>
<tr class="row-even"><td>newline</td>
<td>enum</td>
<td>Newline character (CRLF, LF or CR)</td>
<td><code class="docutils literal"><span class="pre">CRLF</span></code> by default</td>
</tr>
<tr class="row-odd"><td>newline_in_field</td>
<td>enum</td>
<td>Newline character in each field (CRLF, LF, CR)</td>
<td><code class="docutils literal"><span class="pre">LF</span></code> by default</td>
</tr>
<tr class="row-even"><td>charset</td>
<td>enum</td>
<td>Character encoding (eg. ISO-8859-1, UTF-8)</td>
<td><code class="docutils literal"><span class="pre">UTF-8</span></code> by default</td>
</tr>
<tr class="row-odd"><td>default_timezone</td>
<td>string</td>
<td>Time zone of timestamp columns. This can be overwritten for each column using <code class="docutils literal"><span class="pre">column_options</span></code></td>
<td><code class="docutils literal"><span class="pre">UTC</span></code> by default</td>
</tr>
<tr class="row-even"><td>column_options</td>
<td>hash</td>
<td>See bellow</td>
<td>optional</td>
</tr>
</tbody>
</table>
<p>(*1): if quote_policy is NONE, <code class="docutils literal"><span class="pre">quote</span></code> option is ignored, and default <code class="docutils literal"><span class="pre">escape</span></code> is <code class="docutils literal"><span class="pre">\</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">quote_policy</span></code> option is used to determine field type to quote.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ALL</td>
<td>Quote all fields</td>
</tr>
<tr class="row-odd"><td>MINIMAL</td>
<td>Only quote those fields which contain delimiter, quote or any of the characters in lineterminator</td>
</tr>
<tr class="row-even"><td>NONE</td>
<td>Never quote fields. When the delimiter occurs in field, escape with escape char</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">column_options</span></code> option is a map whose keys are name of columns, and values are configuration with following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="59%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>timezone</td>
<td>string</td>
<td>Time zone if type of this column is timestamp. If not set, <code class="docutils literal"><span class="pre">default\_timezone</span></code> is used.</td>
<td>optional</td>
</tr>
<tr class="row-odd"><td>format</td>
<td>string</td>
<td>Timestamp format if type of this column is timestamp.</td>
<td><code class="docutils literal"><span class="pre">%Y-%m-%d</span> <span class="pre">%H:%M:%S.%6N</span> <span class="pre">%z</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id50">Example</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">formatter</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csv</span>
    <span class="l l-Scalar l-Scalar-Plain">delimiter</span><span class="p p-Indicator">:</span> <span class="s">&quot;\t&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">newline</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CRLF</span>
    <span class="l l-Scalar l-Scalar-Plain">newline_in_field</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">LF</span>
    <span class="l l-Scalar l-Scalar-Plain">charset</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
    <span class="l l-Scalar l-Scalar-Plain">quote_policy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">MINIMAL</span>
    <span class="l l-Scalar l-Scalar-Plain">quote</span><span class="p p-Indicator">:</span> <span class="s">&#39;&quot;&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">escape</span><span class="p p-Indicator">:</span> <span class="s">&quot;\\&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">null_string</span><span class="p p-Indicator">:</span> <span class="s">&quot;\\N&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">default_timezone</span><span class="p p-Indicator">:</span> <span class="s">&#39;UTC&#39;</span>
    <span class="l l-Scalar l-Scalar-Plain">column_options</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">mycol1</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">mycol2</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">format</span><span class="p p-Indicator">:</span> <span class="s">&#39;%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S&#39;</span><span class="p p-Indicator">,</span> <span class="nv">timezone</span><span class="p p-Indicator">:</span> <span class="s">&#39;America/Los_Angeles&#39;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gzip-encoder-plugin">
<h2><a class="toc-backref" href="#id51">Gzip encoder plugin</a><a class="headerlink" href="#gzip-encoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">gzip</span></code> encoder plugin compresses output files using gzip.</p>
<div class="section" id="id16">
<h3><a class="toc-backref" href="#id52">Options</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>level</td>
<td>integer</td>
<td>Compression level. From 0 (no compression) to 9 (best compression).</td>
<td><code class="docutils literal"><span class="pre">6</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id17">
<h3><a class="toc-backref" href="#id53">Example</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">encoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
    <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id54">Gzip encoder plugin</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">gzip</span></code> encoder plugin compresses output files using gzip.</p>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id55">Options</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>level</td>
<td>integer</td>
<td>Compression level. From 0 (no compression) to 9 (best compression).</td>
<td><code class="docutils literal"><span class="pre">6</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id20">
<h3><a class="toc-backref" href="#id56">Example</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">encoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
    <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bzip2-encoder-plugin">
<h2><a class="toc-backref" href="#id57">BZip2 encoder plugin</a><a class="headerlink" href="#bzip2-encoder-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">bzip2</span></code> encoder plugin compresses output files using bzip2.</p>
<div class="section" id="id21">
<h3><a class="toc-backref" href="#id58">Options</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>level</td>
<td>integer</td>
<td>Compression level. From 1 to 9 (best compression).</td>
<td><code class="docutils literal"><span class="pre">9</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id59">Example</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">encoders</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bzip2</span>
    <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rename-filter-plugin">
<h2><a class="toc-backref" href="#id60">Rename filter plugin</a><a class="headerlink" href="#rename-filter-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">rename</span></code> filter plugin changes column names. This plugin has no impact on performance.</p>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id61">Options</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="9%" />
<col width="64%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>columns</td>
<td>hash</td>
<td>A map whose keys are existing column names. values are new names.</td>
<td><code class="docutils literal"><span class="pre">{}</span></code> by default</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id24">
<h3><a class="toc-backref" href="#id62">Example</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">- type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rename</span>
    <span class="l l-Scalar l-Scalar-Plain">columns</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">my_existing_column1</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">new_column1</span>
      <span class="l l-Scalar l-Scalar-Plain">my_existing_column2</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">new_column2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="local-executor-plugin">
<h2><a class="toc-backref" href="#id63">Local executor plugin</a><a class="headerlink" href="#local-executor-plugin" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">local</span></code> executor plugin runs tasks using local threads. This is the only built-in executor plugin.</p>
<div class="section" id="id25">
<h3><a class="toc-backref" href="#id64">Options</a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="7%" />
<col width="51%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">type</th>
<th class="head">description</th>
<th class="head">required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>max_threads</td>
<td>integer</td>
<td>Maximum number of threads to run concurrently.</td>
<td>2x of available CPU cores by default</td>
</tr>
<tr class="row-odd"><td>min_output_tasks</td>
<td>integer</td>
<td>Mimimum number of output tasks to enable page scattering.</td>
<td>1x of available CPU cores by default</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal"><span class="pre">max_threads</span></code> option controls maximum concurrency. Setting smaller number here is useful if too many threads make the destination or source storage overloaded. Setting larger number here is useful if CPU utilization is too low due to high latency.</p>
<p>The <code class="docutils literal"><span class="pre">min_output_tasks</span></code> option enables &#8220;page scattering&#8221;. The feature is enabled if number of input tasks is less than <code class="docutils literal"><span class="pre">min_output_tasks</span></code>. It uses multiple filter &amp; output threads for each input task so that one input task can use multiple threads. Setting larger number here is useful if embulk doesn&#8217;t use multi-threading with enough concurrency due to too few number of input tasks. Setting 1 here disables page scattering completely.</p>
</div>
<div class="section" id="id26">
<h3><a class="toc-backref" href="#id65">Example</a><a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">exec</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">max_threads</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>         <span class="c1"># run at most 8 tasks concurrently</span>
  <span class="l l-Scalar l-Scalar-Plain">min_output_tasks</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>    <span class="c1"># disable page scattering</span>
<span class="l l-Scalar l-Scalar-Plain">in</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="l l-Scalar l-Scalar-Plain">out</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="recipe/scheduled-csv-load-to-elasticsearch-kibana4.html">Scheduled bulk data loading to Elasticsearch + Kibana 4 from CSV files</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="customization.html">Customization</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Embulk Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>